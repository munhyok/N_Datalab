(()=>{"use strict";var e,t={9022:(e,t,n)=>{var r=n(7294),a=n(1893);const i=n.p+"static/images/7ebdfeb7aac40537038d.png",o=n.p+"static/images/de5f9d87719b6eacf3fd.png";class c{static _callProc(e,t,n,r){return e().then((e=>e)).catch((a=>{if(console.error(a),a&&"no retry"===a.message)throw new Error("no retry");if(t<r){const a=t+1;return console.error("request failed, retry("+a+")"),n<=0?c._callProc(e,a,n,r):new Promise((e=>{setTimeout((()=>{e(null)}),n)})).then((()=>c._callProc(e,a,n,r)))}throw a}))}static call(e,t=1500,n=5){return c._callProc(e,0,t,n)}static parseQuery(e){const t={},n=e.split("?"),r=(1===n.length?n[0]:n[1]).split("&");for(let e=0;e<r.length;e++){const n=r[e].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}return t}static wait(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}}const l=c;var u=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))};class s{static addCommaToNumber(e){return s.isNumber(e)?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e}static isNumber(e){return!!e&&!isNaN(e)}static smallNumber(e){return"number"==typeof e?e<0?"∞":e>.1?e.toFixed(2):e.toFixed(3):"-"}static discardRegExp(e){const t=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;return t.test(e)?e.replace(t,""):e}static getGradeString(e){switch(e){case"FIRST":return"프리미엄";case"SECOND":return"빅파워";case"THIRD":return"파워";case"FOURTH":return"새싹";case"FIFTH":return"씨앗";default:return"플래티넘"}}static downloadImage(e,t,n,r){return u(this,void 0,void 0,(function*(){e=e.split("?")[0];const a=document.createElement("a");a.href=yield s.toDataURL(e),a.setAttribute("download",`${r}_${n}_${t}`),document.body.appendChild(a),a.click(),yield l.wait(200),document.body.removeChild(a)}))}static toDataURL(e){return u(this,void 0,void 0,(function*(){return yield fetch(e).then((e=>e.blob())).then((e=>URL.createObjectURL(e)))}))}}var d=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,m=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,f=/[^-+\dA-Z]/g,y={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},h={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(t,"0")},g=function(e){var t=e.y,n=e.m,r=e.d,a=e._,i=e.dayName,o=e.short,c=void 0!==o&&o,l=new Date,u=new Date;u.setDate(u[a+"Date"]()-1);var s=new Date;return s.setDate(s[a+"Date"]()+1),l[a+"FullYear"]()===t&&l[a+"Month"]()===n&&l[a+"Date"]()===r?c?"Tdy":"Today":u[a+"FullYear"]()===t&&u[a+"Month"]()===n&&u[a+"Date"]()===r?c?"Ysd":"Yesterday":s[a+"FullYear"]()===t&&s[a+"Month"]()===n&&s[a+"Date"]()===r?c?"Tmw":"Tomorrow":i},v=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);var a=(t-n)/6048e5;return 1+Math.floor(a)},w=function(e){var t=e.getDay();return 0===t&&(t=7),t},b=function(e){return(String(e).match(m)||[""]).pop().replace(f,"").replace(/GMT\+0000/g,"UTC")},T=n(3528),E=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))};class x{static getLastQuery(){return new Promise(((e,t)=>{let n=null;chrome.tabs.query({active:!0,currentWindow:!0},(r=>{for(let e=0;e<r.length;e+=1){const{url:t}=r[e];if("string"==typeof t&&(t.startsWith("https://search.shopping.naver.com/search/all?")||t.startsWith("https://search.naver.com/search.naver?"))){n=t;break}}if(n)try{const t=n.split("query=")[1].split("&")[0];e(t.replace(/\+/g,"%20"))}catch(e){t(new Error("err_url_parsing"))}else t(new Error("err_not_found"))}))}))}static getCurrentHost(){return new Promise(((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0},(t=>{const n=document.createElement("a");n.href=t[0].url,e(n.hostname)}))}))}static getCurrentUrl(){return new Promise(((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0},(t=>{const n=document.createElement("a");n.href=t[0].url,e(n.href)}))}))}static getUserIdFromCookie(){return E(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{chrome.cookies.getAll({domain:"itemscout.io",name:"u_id"},(t=>{var n;e(null===(n=t[0])||void 0===n?void 0:n.value)}))}))}))}static getCurrentTabId(){var e;return E(this,void 0,void 0,(function*(){const[t]=yield chrome.tabs.query({active:!0,currentWindow:!0});return null!==(e=t.id)&&void 0!==e?e:-1}))}static parseDom(e,t,n){return x.doDomJob("parseDomById",{html:e,id:t},n)}static doDomJob(e,t,n){return E(this,void 0,void 0,(function*(){return new Promise(((r,a)=>E(this,void 0,void 0,(function*(){try{yield chrome.scripting.executeScript({target:{tabId:n},files:["parser/parser.js"]}),chrome.tabs.sendMessage(n,{message:e,args:t},(e=>{r(e.data)}))}catch(e){a(e)}}))))}))}}class D{static init(){var e,t,n,r;return e=this,t=void 0,r=function*(){(0,T.S1)(null!=="752e71639715f4295e1f7309316e0d23"?"752e71639715f4295e1f7309316e0d23":"");const e=yield x.getUserIdFromCookie();e&&(0,T.Iv)(e)},new((n=void 0)||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((r=r.apply(e,t||[])).next())}))}}D.logEvent=T.Kz;const M=D;function P(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(""),[c,l]=(0,r.useState)(!0);function u(e){M.init().then((()=>{M.logEvent("product_analysis_image_download_click",{from:"extension",from_sub:"naver_shopping_product_analysis_image_download_click",type:"product_analysis_image_download_click"})})),e.length>0&&(()=>{var t,n,r,a;t=this,n=void 0,a=function*(){try{let t=1;const n=function(e,t,n,r){if(1!==arguments.length||"string"!=typeof e||/\d/.test(e)||(t=e,e=void 0),(e=e||0===e?e:new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var a=(t=String(y[t]||t||y.default)).slice(0,4);"UTC:"!==a&&"GMT:"!==a||(t=t.slice(4),n=!0,"GMT:"===a&&(r=!0));var i=function(){return n?"getUTC":"get"},o=function(){return e[i()+"Date"]()},c=function(){return e[i()+"Day"]()},l=function(){return e[i()+"Month"]()},u=function(){return e[i()+"FullYear"]()},s=function(){return e[i()+"Hours"]()},m=function(){return e[i()+"Minutes"]()},f=function(){return e[i()+"Seconds"]()},T=function(){return e[i()+"Milliseconds"]()},E=function(){return n?0:e.getTimezoneOffset()},x=function(){return v(e)},D=function(){return w(e)},M={d:function(){return o()},dd:function(){return p(o())},ddd:function(){return h.dayNames[c()]},DDD:function(){return g({y:u(),m:l(),d:o(),_:i(),dayName:h.dayNames[c()],short:!0})},dddd:function(){return h.dayNames[c()+7]},DDDD:function(){return g({y:u(),m:l(),d:o(),_:i(),dayName:h.dayNames[c()+7]})},m:function(){return l()+1},mm:function(){return p(l()+1)},mmm:function(){return h.monthNames[l()]},mmmm:function(){return h.monthNames[l()+12]},yy:function(){return String(u()).slice(2)},yyyy:function(){return p(u(),4)},h:function(){return s()%12||12},hh:function(){return p(s()%12||12)},H:function(){return s()},HH:function(){return p(s())},M:function(){return m()},MM:function(){return p(m())},s:function(){return f()},ss:function(){return p(f())},l:function(){return p(T(),3)},L:function(){return p(Math.floor(T()/10))},t:function(){return s()<12?h.timeNames[0]:h.timeNames[1]},tt:function(){return s()<12?h.timeNames[2]:h.timeNames[3]},T:function(){return s()<12?h.timeNames[4]:h.timeNames[5]},TT:function(){return s()<12?h.timeNames[6]:h.timeNames[7]},Z:function(){return r?"GMT":n?"UTC":b(e)},o:function(){return(E()>0?"-":"+")+p(100*Math.floor(Math.abs(E())/60)+Math.abs(E())%60,4)},p:function(){return(E()>0?"-":"+")+p(Math.floor(Math.abs(E())/60),2)+":"+p(Math.floor(Math.abs(E())%60),2)},S:function(){return["th","st","nd","rd"][o()%10>3?0:(o()%100-o()%10!=10)*o()%10]},W:function(){return x()},WW:function(){return p(x())},N:function(){return D()}};return t.replace(d,(function(e){return e in M?M[e]():e.slice(1,e.length-1)}))}(new Date,"yymmddhhmmss");for(let r=0;r<e.length;r++)e[r].startsWith("[아스]")?yield s.downloadImage(e[r].split("[아스]")[1],t++,"detail",n):yield s.downloadImage(e[r],r+1,"thumb",n)}catch(e){console.log("downloaded error",e)}},new((r=void 0)||(r=Promise))((function(e,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function c(e){try{l(a.throw(e))}catch(e){i(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,c)}l((a=a.apply(t,n||[])).next())}))})()}(0,r.useEffect)((()=>{const e=localStorage.getItem("productAnalysisExtractedImage"),n=localStorage.getItem("productAnalysisExtractedText");if(e){let r=JSON.parse(e).map((e=>e.url));if(console.log(r),n){const e=n.split("[아스]").map((e=>e.startsWith("https://")?"[아스]"+e:null)).filter((e=>e));e.length>0&&(r=r.concat(e))}t(r)}n&&a(n)}),[]);const m=n.split("[아스]"),f=e=>{window.open(e,"_blank")};return r.createElement(N,null,r.createElement(S,null,r.createElement(A,null,r.createElement("div",null,r.createElement("img",{src:i,width:90,height:16})),r.createElement(I,null,"페이지 추출")),r.createElement(W,null,"보기 옵션"),r.createElement(Z,null,r.createElement($,null,r.createElement(U,{isSelected:c,style:{marginRight:20}},r.createElement("input",{type:"radio",id:"imageAndText",name:"imageAndText",value:"imageAndText",checked:c,onClick:()=>l(!c),readOnly:!0}),r.createElement("label",{htmlFor:"imageAndText"},"이미지/텍스트 보기")),r.createElement(U,{isSelected:!c},r.createElement("input",{type:"radio",id:"TextOnly",name:"TextOnly",value:"TextOnly",checked:!c,onClick:()=>l(!c),readOnly:!0}),r.createElement("label",{htmlFor:"TextOnly"},"텍스트 보기"))),r.createElement(O,null,r.createElement(k,{onClick:()=>u(e)},r.createElement("div",{style:{marginRight:12}},r.createElement("img",{src:o,alt:"imageExtractLogo"})),r.createElement("div",null,"전체 이미지 다운로드"))))),r.createElement(R,null),r.createElement(_,null,r.createElement(C,null,e.length>0&&c?r.createElement(H,null,e.filter((e=>!e.startsWith("[아스]"))).map(((e,t)=>r.createElement("div",{key:`${e}-${t}`},r.createElement("img",{id:e,src:e,alt:"추출이미지"}))))):r.createElement(H,null,e.filter((e=>!e.startsWith("[아스]"))).map(((e,t)=>r.createElement("div",{key:`${e}-${t}`},r.createElement(F,{onClick:()=>f(e)},"[이미지 열기]"))))),n.length>0&&m.map(((e,t)=>e.startsWith("https://")?c?r.createElement("div",{key:`${e}-${t}`},r.createElement("div",null,r.createElement("img",{src:e,alt:"image"})),r.createElement("div",null,r.createElement(F,{onClick:()=>f(e)},"[이미지 열기]"))):r.createElement("div",null,r.createElement(F,{onClick:()=>f(e),key:`${e}-${t}`},"[이미지 열기]")):r.createElement("div",{key:`${e}-${t}`,style:{whiteSpace:"pre-line"}},e))))))}const N=a.ZP.div`
  margin: 40px;
`,S=a.ZP.div``,_=a.ZP.div`
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
`,k=a.ZP.div`
  padding: 0 16px 0 16px;
  height: 48px;
  border: 1px solid #268dff;
  border-radius: 4px;
  font-style: normal;
  font-weight: 700;
  font-size: 14px;
  color: #268dff;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
`,C=a.ZP.div`
  margin-top: 20px;
`,O=a.ZP.div`
  margin-top: 20px;
  margin-bottom: 16px;
`,Z=a.ZP.div`
  display: flex;
  justify-content: space-between;
`,F=(a.ZP.div``,a.ZP.span`
  font-style: normal;
  font-weight: 700;
  font-size: 12px;
  color: #268dff;
  cursor: pointer;
`),H=a.ZP.div``,A=a.ZP.div`
  display: flex;
  align-items: center;
  margin-bottom: 32px;
`,I=a.ZP.div`
  font-style: normal;
  font-weight: 700;
  font-size: 14px;
  color: #001c34;
  margin-left: 10px;
`,W=a.ZP.div`
  font-style: normal;
  font-weight: 500;
  font-size: 16px;
  color: #001c34;
  margin-bottom: 16px;
`,$=a.ZP.div`
  display: flex;
  align-items: center;
  margin-bottom: 20px;
`,U=a.ZP.div`
  font-style: normal;
  font-weight: 500;
  font-size: 14px;
  color: ${e=>e.isSelected?"#001c34":"rgba(0, 28, 52, 0.4)"};
`,R=a.ZP.div`
  height: 1px;
  background: #e7e8ef;
`;var j=n(745),z=n(4480);const J=document.createElement("div");J.id="extracting-page-container",document.body.appendChild(J),(0,j.s)(J).render(r.createElement((function(){return r.createElement(z.Wh,null,r.createElement(P,null))}),null))}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}r.m=t,r.amdO={},e=[],r.O=(t,n,a,i)=>{if(!n){var o=1/0;for(s=0;s<e.length;s++){for(var[n,a,i]=e[s],c=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(c=!1,i<o&&(o=i));if(c){e.splice(s--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,a,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../"})(),(()=>{var e={833:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,[o,c,l]=n,u=0;if(o.some((t=>0!==e[t]))){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(l)var s=l(r)}for(t&&t(n);u<o.length;u++)i=o[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(s)},n=self.webpackChunkitemscout=self.webpackChunkitemscout||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[348,528,981,451],(()=>r(9022)));a=r.O(a)})();