(()=>{"use strict";class t{static _callProc(e,r,n,a){return e().then((t=>t)).catch((o=>{if(console.error(o),o&&"no retry"===o.message)throw new Error("no retry");if(r<a){const o=r+1;return console.error("request failed, retry("+o+")"),n<=0?t._callProc(e,o,n,a):new Promise((t=>{setTimeout((()=>{t(null)}),n)})).then((()=>t._callProc(e,o,n,a)))}throw o}))}static call(e,r=1500,n=5){return t._callProc(e,0,r,n)}static parseQuery(t){const e={},r=t.split("?"),n=(1===r.length?r[0]:r[1]).split("&");for(let t=0;t<n.length;t++){const r=n[t].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return e}static wait(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}}const e=t,r=Object.freeze({CURRENT_VERSION:"3.3.3",CRAWLING_PAGE_TIMES:15,PRODUCT_ANALYSIS_NAVER_LOGO_WIDTH:152,PRODUCT_ANALYSIS_NAVER_LOGO_HEIGHT:148,PRODUCT_ANALYSIS_GRADE_LOGO_WIDTH:14,PRODUCT_ANALYSIS_GRADE_LOGO_HEIGHT:16.47});var n=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};const a=(t,e,r,a=!0)=>n(void 0,void 0,void 0,(function*(){try{let n=t;return e&&(n=t+function(t,e=!0){const r=e?encodeURIComponent:encodeURI;return Object.keys(t).map((e=>e+"="+r(t[e]))).join("&")}(e,a)),yield fetch(n,Object.assign(Object.assign({},r),{method:"GET"}))}catch(t){throw Error("get request failed")}})),o=(t,e)=>n(void 0,void 0,void 0,(function*(){try{return yield fetch(t,Object.assign(Object.assign({},e),{method:"POST"}))}catch(t){throw Error("post request failed")}}));var c=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};const{CRAWLING_PAGE_TIMES:s}=r,i="https://smartstore.naver.com/main/products/",u="https://shopping.naver.com/outlink/itemdetail/";class l{static crawlProductRanking(t,r,n=1,a){return c(this,void 0,void 0,(function*(){try{const o=[];for(let r=n;r<n+s;r+=1)o.push(e.call((()=>c(this,void 0,void 0,(function*(){return yield e.wait(500*(r-1)),l.requestSearchPage(r,t)})))));const i=yield Promise.all(o);return l.makeCrawlingProductRanking(i,r,a)}catch(t){throw t}}))}static crawlProductRankingByUrl(t,r,n=1,a){return c(this,void 0,void 0,(function*(){try{const o=r.split("?")[0];let i="";if((o.startsWith("https://m.smartstore.naver.com/")||o.startsWith("https://smartstore.naver.com/")||o.startsWith("https://m.brand.naver.com/")||o.startsWith("https://brand.naver.com/")||o.startsWith("https://shopping.naver.com/")||o.startsWith("https://m.shopping.naver.com/"))&&(i=o.split("/products/")[1].split("/")[0]),!i)throw new Error("CANNOT_PARSE_PRODUCT_ID");const u=[];for(let r=n;r<n+s;r+=1)u.push(e.call((()=>c(this,void 0,void 0,(function*(){return yield e.wait(500*(r-1)),l.requestSearchPage(r,t)})))));const d=yield Promise.all(u);return l.makeCrawlingProductRanking(d,i,a,!0)}catch(t){throw t}}))}static makeCrawlingProductRanking(t,e,r,n=!1){return c(this,void 0,void 0,(function*(){const a=[],o=[],c=[];let i=0,u=0,d=0;for(let r=0;r<s;r+=1){let s=0;const h=r+1,m=t[r].split('<script id="__NEXT_DATA__" type="application/json">')[1].split("<\/script>")[0];if(m){const t=JSON.parse(m).props.pageProps.initialState.products.list;for(let m=0;m<t.length;m++){const{item:p}=t[m];if(p.adId){const t=l._getRankResult(i+1,p,!0);t.pageNum=h,t.pageRank=s+1,c.push(t),0===r&&m<4&&d++}if(p.mallName){p.adId?(i++,s++):u++;const t=p.mallName,r=p.mallProductId;if(!n&&t.toLowerCase()===e.toLowerCase()||n&&r==e)if(p.adId){const t=l._getRankResult(i,p,!0);t.pageNum=h,t.pageRank=s,a.push(t)}else o.push(l._getRankResult(u,p))}else if(p.lowMallList){p.adId?(i++,s++):u++;const{lowMallList:t}=p;let r=0;for(let c=0;c<t.length;c++){r+=1;const d=t[c].name,m=t[c].mallPid;if(!n&&d.toLowerCase()===e.toLowerCase()||n&&m==e)if(p.adId){const e=l._getRankResultForMallList(i,r,t[c],p);e.pageNum=h,e.pageRank=s,a.push(e)}else o.push(l._getRankResultForMallList(u,r,t[c],p))}}}}}return"v1"===r?{adResult:a,normalResult:o}:{adResult:a,normalResult:o,totalAdResult:c,adCount:d}}))}static requestSearchPage(t=1,e){return a("https://search.shopping.naver.com/search/all?",{pagingIndex:`${t}`,pagingSize:"80",viewType:"list",sort:"rel",query:e},{method:"GET",credentials:"include",headers:{accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","accept-language":"ko,en;q=0.9,en-US;q=0.8,ja;q=0.7","accept-encoding":"gzip, deflate, br","cache-control":"max-age=0","upgrade-insecure-requests":"1"},referrer:"https://shopping.naver.com/",referrerPolicy:"unsafe-url"}).then((t=>{if(429===t.status)throw new Error("429 too many request");if(t.redirected&&t.url.endsWith("too-many-request"))throw new Error("no retry");return t.text()}))}static _formatPrice(t){return void 0===t?0:t}static _getRankResult(t,e,r=!1){var n;const a="hotdeal"===e.collection?e.nvMid:e.id;let o=e.mallProductUrl||e.crUrl;return r&&"SHOPN"===(null===(n=e.mallInfoCache)||void 0===n?void 0:n.adsrType)&&(o="1"===e.wdTp?u+e.mallProductId:i+e.mallProductId),o||(o=`https://search.shopping.naver.com/product/${a}`),{category1Name:e.category1Name,category2Name:e.category2Name,category3Name:e.category3Name,category4Name:e.category4Name,productId:e.mallProductId,storeId:e.chnlSeq,storeName:e.mallName,nvMid:a,rank:t,isMallList:!1,productTitle:e.productTitle,link:o,imageUrl:e.imageUrl,price:l._formatPrice(e.price),highPrice:l._formatPrice(e.highPrice),lowPrice:l._formatPrice(e.lowPrice),mobilePrice:l._formatPrice(e.mobilePrice),mobileLowPrice:l._formatPrice(e.mobileLowPrice)}}static _getRankResultForMallList(t,e,r,n){const a=r.mallPid,o=r.chnlType,c=r.windowType,s=r.chnlSeq,d=r.name,h=r.nvMid;let m=null;void 0!==o&&void 0!==c&&("STOREFARM"===o.toUpperCase()&&null===c?m=i+a:"WINDOW"===o.toUpperCase()&&(m=u+a));let p=n.crUrl;return p||(p=`https://search.shopping.naver.com/product/${h}`),{productId:a,storeId:s,storeName:d,nvMid:h,rank:t,isMallList:!0,mallCount:n.mallCount,rankInMallGroup:e,productTitle:n.productTitle,imageUrl:n.imageUrl,link:p,productLinkInGroup:m,category1Name:n.category1Name,category2Name:n.category2Name,category3Name:n.category3Name,category4Name:n.category4Name,price:l._formatPrice(n.price),highPrice:l._formatPrice(n.highPrice),lowPrice:l._formatPrice(n.lowPrice),mobilePrice:l._formatPrice(n.mobilePrice),mobileLowPrice:l._formatPrice(n.mobileLowPrice)}}}var d=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,h=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,m=/[^-+\dA-Z]/g;function p(t,e,r,n){if(1!==arguments.length||"string"!=typeof t||/\d/.test(t)||(e=t,t=void 0),(t=t||0===t?t:new Date)instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");var a=(e=String(g[e]||e||g.default)).slice(0,4);"UTC:"!==a&&"GMT:"!==a||(e=e.slice(4),r=!0,"GMT:"===a&&(n=!0));var o=function(){return r?"getUTC":"get"},c=function(){return t[o()+"Date"]()},s=function(){return t[o()+"Day"]()},i=function(){return t[o()+"Month"]()},u=function(){return t[o()+"FullYear"]()},l=function(){return t[o()+"Hours"]()},h=function(){return t[o()+"Minutes"]()},m=function(){return t[o()+"Seconds"]()},p=function(){return t[o()+"Milliseconds"]()},k=function(){return r?0:t.getTimezoneOffset()},b=function(){return w(t)},M=function(){return D(t)},T={d:function(){return c()},dd:function(){return f(c())},ddd:function(){return y.dayNames[s()]},DDD:function(){return v({y:u(),m:i(),d:c(),_:o(),dayName:y.dayNames[s()],short:!0})},dddd:function(){return y.dayNames[s()+7]},DDDD:function(){return v({y:u(),m:i(),d:c(),_:o(),dayName:y.dayNames[s()+7]})},m:function(){return i()+1},mm:function(){return f(i()+1)},mmm:function(){return y.monthNames[i()]},mmmm:function(){return y.monthNames[i()+12]},yy:function(){return String(u()).slice(2)},yyyy:function(){return f(u(),4)},h:function(){return l()%12||12},hh:function(){return f(l()%12||12)},H:function(){return l()},HH:function(){return f(l())},M:function(){return h()},MM:function(){return f(h())},s:function(){return m()},ss:function(){return f(m())},l:function(){return f(p(),3)},L:function(){return f(Math.floor(p()/10))},t:function(){return l()<12?y.timeNames[0]:y.timeNames[1]},tt:function(){return l()<12?y.timeNames[2]:y.timeNames[3]},T:function(){return l()<12?y.timeNames[4]:y.timeNames[5]},TT:function(){return l()<12?y.timeNames[6]:y.timeNames[7]},Z:function(){return n?"GMT":r?"UTC":P(t)},o:function(){return(k()>0?"-":"+")+f(100*Math.floor(Math.abs(k())/60)+Math.abs(k())%60,4)},p:function(){return(k()>0?"-":"+")+f(Math.floor(Math.abs(k())/60),2)+":"+f(Math.floor(Math.abs(k())%60),2)},S:function(){return["th","st","nd","rd"][c()%10>3?0:(c()%100-c()%10!=10)*c()%10]},W:function(){return b()},WW:function(){return f(b())},N:function(){return M()}};return e.replace(d,(function(t){return t in T?T[t]():t.slice(1,t.length-1)}))}var g={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},y={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).padStart(e,"0")},v=function(t){var e=t.y,r=t.m,n=t.d,a=t._,o=t.dayName,c=t.short,s=void 0!==c&&c,i=new Date,u=new Date;u.setDate(u[a+"Date"]()-1);var l=new Date;return l.setDate(l[a+"Date"]()+1),i[a+"FullYear"]()===e&&i[a+"Month"]()===r&&i[a+"Date"]()===n?s?"Tdy":"Today":u[a+"FullYear"]()===e&&u[a+"Month"]()===r&&u[a+"Date"]()===n?s?"Ysd":"Yesterday":l[a+"FullYear"]()===e&&l[a+"Month"]()===r&&l[a+"Date"]()===n?s?"Tmw":"Tomorrow":o},w=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var r=new Date(e.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var n=e.getTimezoneOffset()-r.getTimezoneOffset();e.setHours(e.getHours()-n);var a=(e-r)/6048e5;return 1+Math.floor(a)},D=function(t){var e=t.getDay();return 0===e&&(e=7),e},P=function(t){return(String(t).match(h)||[""]).pop().replace(m,"").replace(/GMT\+0000/g,"UTC")};class k{static getOldDate(t,e){return t?e&&t>e?e:t:e}static addDays(t,e=new Date){const r=new Date(e.getTime()),n=r.getDate()+t;return new Date(r.setDate(n))}static getTimestamp(t){return t?new Date(t).getTime():0}static getMonthDayString(t){const e=`${t}`;return`${e.slice(5,7)}.${e.slice(8)}`}static daysInMonth(t,e){switch(e){case 2:return t%4==0?29:28;case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31}return 30}static getFullDateString(t){return t?p(t,"yyyy-mm-dd"):null}static dateWithDateStr(t){const e=new Date,r=new Date(t);return r.setHours(e.getHours()),r.setMinutes(e.getMinutes()),r.setSeconds(e.getSeconds()),r.setMilliseconds(e.getMilliseconds()),r}static getDateTimeString(t){return p(t,"yyyy-mm-dd HH:MM:ss")}static getDateString(t){return t?p(t,"yyyy-mm-dd"):null}static getDateStringOnlyNumber(t){return t?p(t,"yyyymmdd"):null}static getWeekNum(){const t=((new Date).getTime()/1e3-1585537200)/604800;return Math.floor(t)}static getWeekFirstDate(t){const e=new Date(15855372e5);return e.setDate(e.getDate()+7*t),e}static addDashToDate(t){return t.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")}static addMonths(t,e=new Date){const r=new Date(e.getTime()),n=r.getMonth()+t;return new Date(r.setMonth(n))}static getDataDate(t){let e;return e=t?new Date(t):new Date,e.getHours()<11&&e.setDate(e.getDate()-1),e}static getStartAndEndOfMonth(t){const e=new Date(t);e.setDate(1);const r=k.getDateString(e);return e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1),[r,k.getDateString(e)]}static getMonthesOfYear(t){const e=t,r=[p(e,"yy-mm")];for(let t=0;t<11;t++){const t=new Date(e.setMonth(e.getMonth()-1));r.push(p(t,"yy-mm"))}return r}static getPreviousYear(t){const e=t.getFullYear(),r=t.getMonth(),n=t.getDate();return new Date(e-1,r,n)}}const b=k;function M(t){return`\n        cid=${t.cid}\n        &timeUnit=date\n        &startDate=${t.startDate}\n        &endDate=${t.endDate}\n        &age=\n        &gender=\n        &device=\n        &keyword=${encodeURIComponent(t.keyword)}\n    `.trim().replace(/\n|\s?/g,"")}function T(t){return e=this,r=void 0,a=function*(){return o("https://datalab.naver.com/shoppingInsight/"+t.endpoint+".naver",{headers:{Origin:"https://datalab.naver.com","Accept-Encoding":"gzip, deflate, br","Accept-Language":"ko,en;q=0.9,en-US;q=0.8,ja;q=0.7","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"*/*","X-Requested-With":"XMLHttpRequest"},referrer:"https://datalab.naver.com/",referrerPolicy:"unsafe-url",credentials:"include",body:M(t)}).then((t=>{if(t.ok)return t.json();throw new Error("nsi error")})).then((t=>t.result)).catch((t=>(console.log(t),[])))},new((n=void 0)||(n=Promise))((function(t,o){function c(t){try{i(a.next(t))}catch(t){o(t)}}function s(t){try{i(a.throw(t))}catch(t){o(t)}}function i(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(c,s)}i((a=a.apply(e,r||[])).next())}));var e,r,n,a}const _={getCharts:function(t,e,r,n){const a=b.getDateString(r),o=b.getDateString(n),c={cid:0,startDate:"",endDate:"",keyword:""};c.cid=t,c.startDate=a,c.endDate=o,c.keyword=e;const s=Object.assign(Object.assign({},c),{endpoint:"getKeywordGenderRate"}),i=Object.assign(Object.assign({},c),{endpoint:"getKeywordDeviceRate"}),u=Object.assign(Object.assign({},c),{endpoint:"getKeywordAgeRate"});return Promise.all([T(s),T(i),T(u)]).then((t=>t.map((t=>{var e,r;return null!==(r=null===(e=t[0])||void 0===e?void 0:e.data)&&void 0!==r?r:[]}))))},call:T,getDefaultOption:function(){return{cid:0,startDate:"",endDate:"",keyword:""}}};var S=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};function N(t){return`\n        queryGroups=${t.query.map((t=>`${encodeURIComponent(t)}__SZLIG__${encodeURIComponent(t)}`)).join("__OUML__")}\n        &startDate=${t.startDate}\n        &endDate=${t.endDate}\n        &timeUnit=date\n        &gender=\n        &age=\n        &device=\n    `.trim().replace(/\n|\s?/g,"")}const R={getGraphsInBackground:function(t){return S(this,void 0,void 0,(function*(){return new Promise(((e,r)=>{try{chrome.runtime.sendMessage({action:"keywordGraph",query:t},(t=>{e(t)}))}catch(t){r(t)}}))}))},call:function(t){return S(this,void 0,void 0,(function*(){return o("https://datalab.naver.com/qcHash.naver",{headers:{Origin:"https://datalab.naver.com","Accept-Encoding":"gzip, deflate, br","Accept-Language":"ko,en;q=0.9,en-US;q=0.8,ja;q=0.7","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"*/*","X-Requested-With":"XMLHttpRequest"},referrer:"https://datalab.naver.com/",referrerPolicy:"unsafe-url",credentials:"include",body:N(t)}).then((t=>{if(t.ok)return t.json();throw new Error("nst res1 err")})).then((t=>t.hashKey&&t.success?a("https://datalab.naver.com/keyword/trendResult.naver?",{hashKey:t.hashKey},{headers:{Authority:"datalab.naver.com",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8","Accept-Encoding":"gzip, deflate, br","Accept-Language":"ko,en;q=0.9,en-US;q=0.8,ja;q=0.7","Upgrade-Insecure-Requests":"1"},referrer:"https://datalab.naver.com/keyword/trendSearch.naver"}).then((t=>{if(t.ok)return t.text()})).then((t=>{if(!t)return[];const e=t.split('<div id="graph_data" style="display:none" data-timedimension="date">')[1].split("</div>")[0];return JSON.parse(null!=e?e:"")})):[])).catch((t=>(console.log("nst",t),[])))}))},getDefaultOption:function(){return{query:[],startDate:"",endDate:""}}},C=function(t,e,r,n){const a=R.getDefaultOption();a.query=[e.split(" ").join("")],a.startDate=b.getDateStringOnlyNumber(r),a.endDate=b.getDateStringOnlyNumber(n);const o=_.getDefaultOption();return o.cid=t,o.startDate=b.getDateString(r),o.endDate=b.getDateString(n),o.keyword=e,o.endpoint="getKeywordClickTrend",Promise.all([R.call(a).then((t=>{var e,r;return null!==(r=null===(e=t[0])||void 0===e?void 0:e.data)&&void 0!==r?r:[]})),_.call(o).then((t=>{var e,r;return null!==(r=null===(e=t[0])||void 0===e?void 0:e.data)&&void 0!==r?r:[]}))]).then((t=>t))},x=function(t,e,r){const n=R.getDefaultOption();return n.query=t.map((t=>t.split(" ").join(""))),n.startDate=b.getDateStringOnlyNumber(e),n.endDate=b.getDateStringOnlyNumber(r),R.call(n).then((t=>t.map((t=>(t.data=t.data.map((({period:t,value:e})=>({period:t.replace(/(\d{4})(\d{2})(\d{2})/g,"$1-$2-$3"),value:e}))),t)))))},I=function(t,e,r,n){const a=_.getDefaultOption();return a.cid=t,a.startDate=b.getDateString(r),a.endDate=b.getDateString(n),a.keyword=e.join(","),a.endpoint="getKeywordClickTrend",_.call(a).then((t=>t.map((t=>(t.data=t.data.map((({period:t,value:e})=>({period:t.replace(/(\d{4})(\d{2})(\d{2})/g,"$1-$2-$3"),value:e}))),t)))))};var A=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};class q{static _getMallGrade(t){switch(t){case"PREMIUM":return"프리미엄";case"PLATINUM":return"플래티넘";case"BPOWER":return"빅파워";case"POWER":return"파워";case"SEED":return"씨앗";case"CHILDREN":return"새싹"}return"새싹"}static _getNvMids(t){return t.map((t=>t.mid)).join(",")}static _getPcProductUrl(t){try{if("SHOPN"!==t.adsrType)throw new Error("NOT SUPPORT");return null==t.windowVerticalCode?"https://smartstore.naver.com/main/products/"+t.mallPid:"https://shopping.naver.com/outlink/itemdetail/"+t.mallPid}catch(t){return""}}static _getMobileProductUrl(t){try{if("SHOPN"!==t.adsrType)throw new Error("NOT SUPPORT");return null==t.windowVerticalCode?"https://m.smartstore.naver.com/main/products/"+t.mallPid:"https://m.shopping.naver.com/outlink/itemdetail/"+t.mallPid}catch(t){return""}}static _parseMallListPage(t){return A(this,void 0,void 0,(function*(){if(0===t.length)return[];try{const e=[];for(const r of t){if(20!==r.param.pageSize||null==r.productsPage)continue;const t=r.productsPage.products;for(const r of t){const{channelSequence:t,adsrType:n,productName:a,pcProductUrl:o,mallName:c,materialImageUrl:s,mallPid:i,nvMid:u,pcPrice:l,deliveryFee:d,mallGrade:h}=r,m={storeId:t,isNaverShop:"SHOPN"===n,title:a,link:o,pcProductUrl:this._getPcProductUrl(r),mobileProductUrl:this._getMobileProductUrl(r),shop:c,mallImage:s,mallPid:i,mid:u,price:l,isList:!1,isAd:!1,deliveryFee:parseInt(d),mallGrade:this._getMallGrade(h)};e.push(m)}}const r=yield a("https://search.shopping.naver.com/api/product-zzim/products?",{nvMid:this._getNvMids(e)},void 0,!1);if(r&&r.ok){const t=yield r.json();if(t.bSuccess){const r=t.zzim;for(const t of Object.keys(r)){const n=e.find((e=>e.mid==t));n&&(n.keepCount=r[t].count)}}}return e}catch(t){console.log(t)}}))}static getTopItems(t,e){return A(this,void 0,void 0,(function*(){try{const r=yield q.getNextData(t,e);if(r){const t=yield q._parseMallListPage(r);if(t)return t.slice(0,10)}return[]}catch(t){throw new Error("getTopItems Error")}}))}static getNextData(t,e){return A(this,void 0,void 0,(function*(){try{const e=yield a(`https://search.shopping.naver.com/catalog/${t}`);if(e.ok){const t=(yield e.text()).split('<script id="__NEXT_DATA__" type="application/json">')[1].split("<\/script>")[0];if(t)return JSON.parse(t).props.pageProps.initialState.catalog.products}return null}catch(t){throw new Error("getNextData Error")}}))}}var U=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};class O{static parseMobileUrl(t,r){var n;return U(this,void 0,void 0,(function*(){try{const a=yield this.parseRedirectUrl(t,r);if(console.log(a,"parseMobileUrl url parser"),r)return(null!==(n=O.fixIpCheck(a))&&void 0!==n?n:"").replace("http://","https://").replace("https://smartstore.naver.com","https://m.smartstore.naver.com").replace("https://brand.naver.com","https://m.brand.naver.com").replace("https://shopping.naver.com","https://m.shopping.naver.com");if(a.startsWith("http://www.tmon.co.kr/entry")){return`https://www.tmon.co.kr/deal/${e.parseQuery(a).p_no}`}if(a.startsWith("https://www.11st.co.kr/connect/Gateway.tmall")){return`https://m.11st.co.kr/products/m/${e.parseQuery(a).prdNo}`}if(a.startsWith("https://link.coupang.com/re")){return`https://m.coupang.com/vm/products/${e.parseQuery(a).pageKey}`}if(a.startsWith("https://front.wemakeprice.com/affiliate/bridge")){const t=e.parseQuery(a),r=t.prodNo,n=t.ticketNo;return r?`https://mw.wemakeprice.com/product/${r}`:n?`https://mticket.wemakeprice.com/product/${n}`:a}return null}catch(t){return null}}))}static fixIpCheck(t){const e=t.split("?");let r=t;return e[0].endsWith("/ip_collect/naver.html")&&(r=new URLSearchParams(e[1]).get("n_final_url")),r}static parseRedirectUrl(t,e){return U(this,void 0,void 0,(function*(){try{if(e){const e=(yield a(t,null,{headers:{itemscoutMobileRequest:"true"}})).url;return console.log("parseRedirectUrl",e),e}{const e=yield a(t);return(yield e.text()).split("var targetUrl = ")[1].split('"')[1]}}catch(t){return""}}))}}var E=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};class L{static getLastQuery(){return new Promise(((t,e)=>{let r=null;chrome.tabs.query({active:!0,currentWindow:!0},(n=>{for(let t=0;t<n.length;t+=1){const{url:e}=n[t];if("string"==typeof e&&(e.startsWith("https://search.shopping.naver.com/search/all?")||e.startsWith("https://search.naver.com/search.naver?"))){r=e;break}}if(r)try{const e=r.split("query=")[1].split("&")[0];t(e.replace(/\+/g,"%20"))}catch(t){e(new Error("err_url_parsing"))}else e(new Error("err_not_found"))}))}))}static getCurrentHost(){return new Promise(((t,e)=>{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{const r=document.createElement("a");r.href=e[0].url,t(r.hostname)}))}))}static getCurrentUrl(){return new Promise(((t,e)=>{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{const r=document.createElement("a");r.href=e[0].url,t(r.href)}))}))}static getUserIdFromCookie(){return E(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{chrome.cookies.getAll({domain:"itemscout.io",name:"u_id"},(e=>{var r;t(null===(r=e[0])||void 0===r?void 0:r.value)}))}))}))}static getCurrentTabId(){var t;return E(this,void 0,void 0,(function*(){const[e]=yield chrome.tabs.query({active:!0,currentWindow:!0});return null!==(t=e.id)&&void 0!==t?t:-1}))}static parseDom(t,e,r){return L.doDomJob("parseDomById",{html:t,id:e},r)}static doDomJob(t,e,r){return E(this,void 0,void 0,(function*(){return new Promise(((n,a)=>E(this,void 0,void 0,(function*(){try{yield chrome.scripting.executeScript({target:{tabId:r},files:["parser/parser.js"]}),chrome.tabs.sendMessage(r,{message:t,args:e},(t=>{n(t.data)}))}catch(t){a(t)}}))))}))}}var W=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};class j{static getContents(t,e,r,n,a){return W(this,void 0,void 0,(function*(){let o="",c="";"naver_blog"===t?o="blog":"naver_cafe"===t&&(o="article",c=",a:all");const s=null==r?void 0:r.replace(/\-/g,""),i=null==n?void 0:n.replace(/\-/g,""),u=yield j._loadHTML(o,e,s,i,c);return yield L.doDomJob("parseNaverViewTab",{html:u},a)}))}static _loadHTML(t,e,r,n,o){return W(this,void 0,void 0,(function*(){const c={where:t,query:e,sm:"tab_opt"};r&&n&&(c.nso="so:r,p:from"+r+"to"+n+o);try{const t=yield a("https://search.naver.com/search.naver?",c);if(t.ok)return yield t.text()}catch(t){return console.error(t),null}}))}}var H=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};class ${static getContents(t,e,r,n){return H(this,void 0,void 0,(function*(){const a=null==e?void 0:e.replace(/\-/g,"."),o=null==r?void 0:r.replace(/\-/g,"."),c=yield $._loadHTML(t,a,o);return yield L.doDomJob("parseNaverNewsTab",{html:c},n)}))}static _loadHTML(t,e,r){return H(this,void 0,void 0,(function*(){try{let n=`https://search.naver.com/search.naver?where=news&query=${encodeURIComponent(t)}&sm=tab_opt`;e&&r&&(n+=`&sort=0&photo=0&field=0&pd=3&ds=${e}&de=${r}&docid=&related=0&mynews=0&office_type=0&office_section_code=0&news_office_checked=&nso=so%3Ar%2Cp%3Afrom${e.replace(/\./g,"")}to${r.replace(/\./g,"")}`);const o=yield a(n);if(o.ok)return yield o.text()}catch(t){return console.error(t),null}}))}}var F=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};class G{static createBody(t){return new URLSearchParams({remoconExpression:"",remoconDocsFound:"",queryText:`TNM=[${t}]`,remoconSelectedArticles:"",remoconByBookMark:"",piField:"",piValue:"",piSearchYN:"N",searchInResultCk:"undefined",next:"SimpleListTM",passwd:"",expression:`TNM=[${t}]`,beforeExpression:"",query:"",rights:"TM",userId:"",config:"G11111111111111111SX11111110011111100",sortField:"",sortState:"",configChange:"N",searchInTrans:"N",searchInResult:"",searchInComplate:"N",searchWithSoundex:"",strstat:"SMART|TN|",paging:"0",maxCount:"0",numPageLinks:"10",currentPage:"1",natICD:"null",docsFound:"0",bookMarkScreen:"",bookMark:"",bookMarkCnt:"0",NWBOOKMARK:"",BOOKMARK:"",FROM:"",collections:"",myMerchandises:"",numPerPage:"1000000",sortState1:"",sortState2:"",sortField1:"",sortField2:"",submitFlag:"N",searchFg:"Y",SEL_PAT:"TM",searchKeyword:"",merchandiseString:"td40,td41,td42,td43,td44,td45,td47,td48,tdmd,",measureString:"A,B,R,",patternString:"NAKletter,NAKfigure,NAKlmixed,NAKfmixed,NAKsounds,NAKfragre,TPDcommon,TPDcolors,TPDcolor,TPDdimens,TPDcmixed,TPDdimcol,TPDhologr,TPDaction,TPDvisual,TPDinvisible,",collectionValues:"",selectedLang:"",lang:"",ipMarketDealFlag:"0",searchInTransCk:"undefined",history:"true"}).toString()}static _requestFromWeb(t){return F(this,void 0,void 0,(function*(){const e=G.createBody(t);console.log("Kipris Request: "+t);try{const r=yield o("http://kdtj.kipris.or.kr/kdtj/grrt1000a.do?method=searchTM",{body:e,headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}});return console.log("Kipris Request Success: "+t),r.text()}catch(e){throw console.log("Kipris Request Failed: "+t),e}}))}static searchTradeMark(t,e){return F(this,void 0,void 0,(function*(){const r=yield G._requestFromWeb(t);return yield L.doDomJob("searchTradeMark",{html:r},e)}))}static _requestProductCategory(t){return F(this,void 0,void 0,(function*(){console.log("Kipris Product Category Request: "+t);try{const e=yield o("http://kdtj.kipris.or.kr/kdtj/wpages/pageTM/biblio/SRAL1000.jsp",{headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9","Content-Type":"application/x-www-form-urlencoded"},body:`all_applno=${t}&all_srgCheck=true`,method:"post"});return console.log("Kipris Product Category Request Success: "+t),e.text()}catch(e){throw console.error(e),console.log("Kipris Product Category Request Failed: "+t),e}}))}static crawlProductCategory(t,e){return F(this,void 0,void 0,(function*(){const r=yield G._requestProductCategory(t);return yield L.doDomJob("parseTrademarkCategory",{html:r},e)}))}static getThumbnailImage(t){return a("http://kdtj.kipris.or.kr/kdtj/remoteFile.do?",{method:"thumNailTM",applno:`${t}`},{headers:{accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8","accept-language":"ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7"},referrer:"http://kdtj.kipris.or.kr/kdtj/searchLogina.do?method=loginTM",referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"include"}).then((t=>t.blob())).then((t=>new Promise(((e,r)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.readAsDataURL(t)}))))}}const K=G;var z=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};class J{static getProductStat(t,e,r,n=null){var o,c;return z(this,void 0,void 0,(function*(){try{const s=yield J.requestProductApi(t,e,r),i=(null!==(o=s.productDeliveryLeadTimes)&&void 0!==o?o:[]).reduce(((t,e)=>t+e.leadTimeCount),0);let u=s.saleAmount.recentSaleCount;u<0&&(u=0);const l=s.reviewAmount.totalReviewCount,d=s.reviewAmount.averageReviewScore;let h;if(n){const t=yield a("https://search.shopping.naver.com/api/product-zzim/products?",{nvMid:n},void 0,!1).catch((()=>null));if(null==t?void 0:t.ok){const e=yield t.json();e.bSuccess&&(h=null===(c=e.zzim[n])||void 0===c?void 0:c.count)}}return{saleCount:u,saleCount6M:s.saleAmount.cumulationSaleCount,deliveryCount:i,reviewCount:l,reviewScore:d,keepCount:h,regDate:s.regDate}}catch(t){throw console.log(t),new Error("getProductStat Error")}}))}static requestProductApi(t,e,r){return z(this,void 0,void 0,(function*(){try{const n=J.getShopType(r)?`https://smartstore.naver.com/i/v1/stores/${e}/products/${t}`:`https://shopping.naver.com/v1/products/${t}`;return(yield a(n)).json()}catch(t){throw new Error("requestProductApi Error")}}))}static getShopType(t){return t.startsWith("https://smartstore.naver.com")}}var Y=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};class B{static getAutoCompleteKeywords(t){return Y(this,void 0,void 0,(function*(){const e=`jQuery111107058076459689768_${(new Date).getTime()}`,r="https://www.coupang.com/np/search/autoComplete?callback="+e+"&keyword="+encodeURIComponent(t),n=yield fetch(r).then((t=>t.text())),a=n.slice(0,n.length-1).split(e+"(")[1];return JSON.parse(a).map((t=>t.keyword))}))}static getRelatedKeywords(t){return Y(this,void 0,void 0,(function*(){const e="https://www.coupang.com/np/search?component=&channel=auto&q="+encodeURIComponent(t),r=yield fetch(e).then((t=>t.text()));return Array.from(r.matchAll(new RegExp('data-keyword="[ㄱ-ㅎ|가-힣|a-z|A-Z|0-9|-| ]+"',"g"))).map((t=>t[0].slice(14,t[0].length-1)))}))}}var V=function(t,e,r,n){return new(r||(r=Promise))((function(a,o){function c(t){try{i(n.next(t))}catch(t){o(t)}}function s(t){try{i(n.throw(t))}catch(t){o(t)}}function i(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(c,s)}i((n=n.apply(t,e||[])).next())}))};if(console.log("chrome extension background on running"),chrome.action.onClicked.addListener((t=>V(void 0,void 0,void 0,(function*(){const{id:e}=t;e&&chrome.scripting.executeScript({target:{tabId:e},files:["iframe_script/iframe_script.js"]})})))),chrome.declarativeNetRequest.onRuleMatchedDebug)try{chrome.declarativeNetRequest.onRuleMatchedDebug.addListener((t=>{console.log(t)}))}catch(t){console.error(t)}let Z="";chrome.tabs.onUpdated.addListener(((t,e,r)=>V(void 0,void 0,void 0,(function*(){var e,n;const{url:a}=r;Z!==a&&(a&&(Z=a),chrome.scripting.executeScript({target:{tabId:t},func:()=>{var t;const e=document.getElementById("itemscoutWebExtension");e&&(null===(t=e.contentWindow)||void 0===t||t.postMessage("updated","*"))}})),"loading"!==r.status&&((null==a?void 0:a.startsWith("https://search.shopping.naver.com/search/all"))&&chrome.scripting.executeScript({target:{tabId:t},files:["keyword_analysis_script/keyword_analysis_script.js"]}),(null==a?void 0:a.startsWith("https://manage.searchad.naver.com/customers/"))&&(null==a?void 0:a.endsWith("/tool/keyword-planner"))&&chrome.scripting.executeScript({target:{tabId:t},files:["search_ad_check_script/search_ad_check_script.js"]}),((null==a?void 0:a.startsWith("https://smartstore.naver.com"))||(null==a?void 0:a.startsWith("https://brand.naver.com")))&&"products"===(null!==(n=(null!==(e=a.split(".com/")[1])&&void 0!==e?e:"").split("/")[1])&&void 0!==n?n:"").split("/")[0]&&chrome.scripting.executeScript({target:{tabId:t},files:["product_analysis_script/product_analysis_script.js"]}),(null==a?void 0:a.startsWith("https://korean.alibaba.com/p-detail"))&&chrome.scripting.executeScript({target:{tabId:t},files:["korean_alibaba_search_check_script/korean_alibaba_search_check_script.js"]}),(null==a?void 0:a.startsWith("https://www.alibaba.com/product-detail"))&&chrome.scripting.executeScript({target:{tabId:t},files:["alibaba_search_check_script/alibaba_search_check_script.js"]}))})))),chrome.runtime.onMessage.addListener(((t,e,r)=>{if("openProductAnalysisExtractPage"===t.message&&chrome.tabs.create({url:chrome.runtime.getURL("product_analysis_extracting_page/product_analysis_extracting_page.html")}),"getGraph"===t.message){const{cid:e,keyword:n}=t,a=Math.min(t.startDate,t.endDate),o=Math.max(t.startDate,t.endDate);C(e,n,a,o).then((t=>{t&&r({data:t,success:!0})})).catch((t=>{r({err:t,success:!1})}))}return!0})),chrome.runtime.onMessageExternal.addListener(((t,e,n)=>{var a;console.log("start : "),console.log("request : "+JSON.stringify(t)),console.log("request.message : "+t.message);const o=null===(a=e.tab)||void 0===a?void 0:a.id;if(!t||!o)return n({success:!1}),!0;switch(t.message){case"version":n({success:!0,data:{version:r.CURRENT_VERSION}});break;case"getSearchTrends":{const{cid:e,keywords:r}=t,a=Math.min(t.startDate,t.endDate),o=Math.max(t.startDate,t.endDate);x(r,a,o).then((t=>{console.log(t),n({data:t,success:!0})})).catch((t=>{n({err:t,success:!1})}));break}case"getClickTrends":{const{cid:e,keywords:r}=t,a=Math.min(t.startDate,t.endDate),o=Math.max(t.startDate,t.endDate);I(e,r,a,o).then((t=>{console.log(t),n({data:t,success:!0})})).catch((t=>{n({err:t,success:!1})}));break}case"getGraphs":{const{cid:e,keyword:r}=t,a=Math.min(t.startDate,t.endDate),o=Math.max(t.startDate,t.endDate);C(e,r,a,o).then((t=>{n({data:t,success:!0})})).catch((t=>{n({err:t,success:!1})}));break}case"getCharts":{const{cid:e,keyword:r}=t,a=Math.min(t.startDate,t.endDate),o=Math.max(t.startDate,t.endDate);_.getCharts(e,r,a,o).then((t=>{n({data:t,success:!0})})).catch((t=>{n({err:t,success:!1})}));break}case"getProductRanking":{const e=t.keyword,r=t.shop,a=t.startPage?t.startPage:1;l.crawlProductRanking(e,r,a,"v1").then((t=>{n({data:t,success:!0})})).catch((t=>{n({err:t.message,success:!1})}));break}case"getProductRankingV2":{const e=t.keyword,r=t.shop,a=t.startPage?t.startPage:1;l.crawlProductRanking(e,r,a,"v2").then((t=>{n({data:t,success:!0})})).catch((t=>{n({err:t.message,success:!1})}));break}case"getProductRankingByUrl":{const e=t.keyword,r=t.url,a=t.startPage?t.startPage:1;l.crawlProductRankingByUrl(e,r,a,"v1").then((t=>{n({data:t,success:!0})})).catch((t=>{n({err:t.message,success:!1})}));break}case"getProductRankingByUrlV2":{const e=t.keyword,r=t.url,a=t.startPage?t.startPage:1;l.crawlProductRankingByUrl(e,r,a,"v2").then((t=>{n({data:t,success:!0})})).catch((t=>{n({err:t.message,success:!1})}));break}case"getTopItems":{const e=t.nvMid;q.getTopItems(e,o).then((t=>{n({data:t,success:!0})})).catch((t=>{console.log(t),n({err:t,success:!1})}));break}case"getProductStatV2":{const{mallPid:e,storeId:r,link:a,nvMid:o}=t;J.getProductStat(e,r,a,o).then((t=>{console.log("getProductStatV2",t),n({data:t,success:!0})})).catch((t=>{console.log(t),n({err:t,success:!1})}));break}case"getMobileUrl":{const e=t.link,r=!!t.isAd;O.parseMobileUrl(e,r).then((t=>{console.log(t,"getMobileUrl"),n({data:t,success:!0})})).catch((t=>{console.log(t),n({err:t,success:!1})}));break}case"getSNSContent":!function(t,e,r){V(this,void 0,void 0,(function*(){const n=e.keyword,a=e.snsType,o=e.startDate,c=e.endDate;try{if("naver_blog"===a||"naver_cafe"===a){const e=yield j.getContents(a,n,o,c,t);r({data:e,success:!0})}else{if("naver_news"!==a)throw new Error("no-sns-type");{const e=yield $.getContents(n,o,c,t);r({data:e,success:!0})}}}catch(t){console.error(t),r({err:t,success:!1})}}))}(o,t,n);break;case"tmSearch":{const e=t.query;K.searchTradeMark(e,o).then((t=>{console.log("tmSearch",t),n({data:t,success:!0})})).catch((t=>{n({err:t,success:!1})}));break}case"tmProduct":{const e=t.appNo;K.crawlProductCategory(e,o).then((t=>{console.log("tmProduct",t),n({data:t,success:!0})})).catch((t=>{n({err:t,success:!1})}));break}case"tmImage":{const e=t.appNo;K.getThumbnailImage(e).then((t=>{console.log("tmImage",t),n({data:t,success:!0})})).catch((t=>{n({err:t,success:!1})}));break}case"coupangAC":{const e=t.keyword;B.getAutoCompleteKeywords(e).then((t=>{n({data:t,success:!0})})).catch((t=>{n({err:t,success:!1})}));break}case"coupangRel":{const e=t.keyword;B.getRelatedKeywords(e).then((t=>{n({data:t,success:!0})})).catch((t=>{n({err:t,success:!1})}));break}default:return console.log("switch default"),n({err:"UNKNWON ERROR",success:!1}),!0}return!0}))})();