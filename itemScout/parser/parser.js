(()=>{"use strict";console.log("parser.js loaded"),window.itemscoutAddParserListener||(console.log("parser.js added"),chrome.runtime.onMessage.addListener((function(t,e,l){var i,o,n,r,d,u,s,c,v,a,h,m,p,_,g,b,f,y,S,x,q,A,C,w,k,D,N,M,O,P,T,F,j,B,I,L,E,V,W,z,G,H,J,K,Q,R,U,X,Y,Z,$,tt,et,lt,it,ot,nt,rt,dt,ut,st,ct,vt,at,ht,mt,pt,_t,gt,bt,ft,yt,St,xt,qt,At,Ct,wt;const{message:kt}=t;switch(kt){case"parseDomById":{const{html:e,id:n}=t.args;l({data:null!==(o=null===(i=(new DOMParser).parseFromString(e,"text/html").getElementById(n))||void 0===i?void 0:i.textContent)&&void 0!==o?o:""});break}case"parseTrademarkCategory":{const{html:e}=t.args,i=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("table.tstyle_list tbody tr"),o=[];for(const t of i){const e=null!==(d=null===(r=null===(n=t.querySelectorAll("td:nth-child(2)").item(0))||void 0===n?void 0:n.textContent)||void 0===r?void 0:r.trim())&&void 0!==d?d:"",l=null!==(c=null===(s=null===(u=t.querySelectorAll("td:nth-child(4)").item(0))||void 0===u?void 0:u.textContent)||void 0===s?void 0:s.trim())&&void 0!==c?c:"";o.push({code:e,product:l})}const v=[];let a=[],h="";for(const t of o)t.code!==h?(a.length>0&&v.push({code:h,products:a}),h=t.code,a=[t.product]):a.push(t.product);a.length>0&&v.push({code:h,products:a}),l({data:v});break}case"searchTradeMark":{const{html:e}=t.args,i=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("section.search_section article"),o=[];for(const t of i){const e=null!==(h=null===(a=null===(v=t.querySelector("span#iconStatus"))||void 0===v?void 0:v.textContent)||void 0===a?void 0:a.trim())&&void 0!==h?h:"",l=null!==(_=null===(p=null===(m=t.querySelectorAll("div.search_section_title h1 a").item(1))||void 0===m?void 0:m.textContent)||void 0===p?void 0:p.trim())&&void 0!==_?_:"",i="http://kdtj.kipris.or.kr/"+(null===(g=t.querySelectorAll("div.search_basic_info div.thumb a img").item(0))||void 0===g?void 0:g.getAttribute("src"));let n=[];const r=t.querySelectorAll("ul.search_info_list li:nth-child(1) span.point01");if(r.length>4)n=null!==(y=null===(f=null===(b=r.item(4))||void 0===b?void 0:b.getAttribute("title"))||void 0===f?void 0:f.trim().split("|"))&&void 0!==y?y:[];else{const e=t.querySelectorAll("ul.search_info_list li:nth-child(1) a");for(const t of e)n.push(null!==(x=null===(S=t.textContent)||void 0===S?void 0:S.trim())&&void 0!==x?x:"")}const d=null===(A=null===(q=t.querySelectorAll("ul.search_info_list li:nth-child(2)").item(0))||void 0===q?void 0:q.textContent)||void 0===A?void 0:A.split(":")[1].trim(),u=null===(w=null===(C=t.querySelectorAll("ul.search_info_list li:nth-child(3)").item(0))||void 0===C?void 0:C.textContent)||void 0===w?void 0:w.split(":")[1].trim(),s=null===(D=null===(k=t.querySelectorAll("ul.search_info_list li:nth-child(4)").item(0))||void 0===k?void 0:k.textContent)||void 0===D?void 0:D.split(":")[1].trim(),c=null===(M=null===(N=t.querySelectorAll("ul.search_info_list li:nth-child(5)").item(0))||void 0===N?void 0:N.textContent)||void 0===M?void 0:M.split(":")[1].trim(),W=null===(P=null===(O=t.querySelectorAll("ul.search_info_list li:nth-child(6)").item(0))||void 0===O?void 0:O.textContent)||void 0===P?void 0:P.split(":")[1].trim(),z=null===(F=null===(T=t.querySelectorAll("ul.search_info_list li:nth-child(7)").item(0))||void 0===T?void 0:T.textContent)||void 0===F?void 0:F.split(":")[1].trim(),G=null===(B=null===(j=t.querySelectorAll("ul.search_info_list li:nth-child(8)").item(0))||void 0===j?void 0:j.textContent)||void 0===B?void 0:B.split(":")[1].trim(),H=null===(L=null===(I=t.querySelectorAll("ul.search_info_list li:nth-child(9)").item(0))||void 0===I?void 0:I.textContent)||void 0===L?void 0:L.split(":")[1].trim(),J=null===(V=null===(E=t.querySelectorAll("ul.search_info_list li:nth-child(10)").item(0))||void 0===E?void 0:E.textContent)||void 0===V?void 0:V.split(":")[1].trim();o.push({title:l,type:e,thumbnail:i,category:n,applicant:d,applicationNo:u,applicationDate:s,registrationNo:c,registrationDate:W,noticeNo:z,noticeDate:G,figureCode:H,agent:J})}l({data:o});break}case"parseNaverViewTab":{const{html:e}=t.args,i=(new DOMParser).parseFromString(e,"text/html").querySelectorAll(".total_wrap"),o=[];console.log(i.length);for(const t of i)try{const e={};e.thumb=null!==(G=null===(z=null===(W=t.querySelector(".thumb img"))||void 0===W?void 0:W.getAttribute("src"))||void 0===z?void 0:z.trim())&&void 0!==G?G:"",e.thumb||(e.thumb="https://ssl.pstatic.net/sstatic/search/mobile/img/bg_npimg.png"),e.name=null!==(K=null===(J=null===(H=t.querySelector(".sub_txt.sub_name"))||void 0===H?void 0:H.textContent)||void 0===J?void 0:J.trim())&&void 0!==K?K:"",e.date=null!==(U=null===(R=null===(Q=t.querySelector(".sub_time.sub_txt"))||void 0===Q?void 0:Q.textContent)||void 0===R?void 0:R.trim())&&void 0!==U?U:"",e.popularCafe=t.querySelectorAll(".api_ico_total").length>0,e.officialBlog=t.querySelectorAll(".api_icon_official2").length>0,e.title=null!==(Z=null===(Y=null===(X=t.querySelector(".api_txt_lines.total_tit"))||void 0===X?void 0:X.textContent)||void 0===Y?void 0:Y.trim())&&void 0!==Z?Z:"",e.link=null!==(tt=null===($=t.querySelector(".api_txt_lines.total_tit"))||void 0===$?void 0:$.getAttribute("href"))&&void 0!==tt?tt:"",e.desc=null!==(it=null===(lt=null===(et=t.querySelector(".total_dsc"))||void 0===et?void 0:et.textContent)||void 0===lt?void 0:lt.trim())&&void 0!==it?it:"",e.contentThumb=null!==(nt=null===(ot=t.querySelector(".thumb_fix .thumb.api_get"))||void 0===ot?void 0:ot.getAttribute("src"))&&void 0!==nt?nt:"";const l=parseInt(null!==(ut=null===(dt=null===(rt=t.querySelector(".thumb_fix .thumb_count"))||void 0===rt?void 0:rt.textContent)||void 0===dt?void 0:dt.trim())&&void 0!==ut?ut:"0");!isNaN(l)&&l&&(e.contentThumbCnt=l),o.push(e)}catch(t){console.error(t)}l({data:o});break}case"parseNaverNewsTab":{const{html:e}=t.args,i=(new DOMParser).parseFromString(e,"text/html").querySelectorAll(".list_news .bx"),o=[];for(const t of i)try{const e={};e.thumb=null!==(vt=null===(ct=null===(st=t.querySelector(".info.press .thumb_box .thumb"))||void 0===st?void 0:st.getAttribute("src"))||void 0===ct?void 0:ct.trim())&&void 0!==vt?vt:"",e.thumb.startsWith("http")||(e.thumb="https://ssl.pstatic.net/sstatic/search/pc/img/bg_news_press_default.png"),e.name=null!==(mt=null===(ht=null===(at=t.querySelector(".info.press"))||void 0===at?void 0:at.textContent)||void 0===ht?void 0:ht.trim())&&void 0!==mt?mt:"";const l=t.querySelectorAll(".info_group .info");for(let t=0;t<l.length;t++){if(0===t)continue;const i=l[t],o=null!==(_t=null===(pt=i.textContent)||void 0===pt?void 0:pt.trim())&&void 0!==_t?_t:"";o.indexOf("면")>-1||o.indexOf("단")>-1||("네이버뉴스"!==o?e.date||(e.date=o):e.link=i.getAttribute("href"))}e.title=null!==(ft=null===(bt=null===(gt=t.querySelector(".news_tit"))||void 0===gt?void 0:gt.textContent)||void 0===bt?void 0:bt.trim())&&void 0!==ft?ft:"",e.link||(e.link=null!==(St=null===(yt=t.querySelector(".news_tit"))||void 0===yt?void 0:yt.getAttribute("href"))&&void 0!==St?St:""),e.desc=null!==(At=null===(qt=null===(xt=t.querySelector(".news_dsc"))||void 0===xt?void 0:xt.textContent)||void 0===qt?void 0:qt.trim())&&void 0!==At?At:"",e.contentThumb=null!==(wt=null===(Ct=t.querySelector(".dsc_thumb .thumb.api_get"))||void 0===Ct?void 0:Ct.getAttribute("src"))&&void 0!==wt?wt:"",o.push(e)}catch(t){console.error(t)}l({data:o});break}}return!0})),window.itemscoutAddParserListener=!0)})();